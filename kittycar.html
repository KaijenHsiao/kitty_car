<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://cdn.robotwebtools.org/mjpegcanvasjs/current/mjpegcanvas.min.js"></script>
<script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>

<script type="text/javascript" type="text/javascript">
  /**
   * Setup all visualization elements and connect to ROS when the page is loaded. 
   */
  var toggle;
  var toggle_msg;
  function init() {
    // Create the main viewer.
    var viewer = new MJPEGCANVAS.Viewer({
      divID : 'mjpeg',
      host : 'localhost',
      width : 640,
      height : 480,
      topic : '/webcam/image_raw'
    });
 
    // Connecting to ROS.
    var ros = new ROSLIB.Ros({
      url : 'ws://localhost:9090'
    });

    //Empty topic+message to use in toggling laser
    toggle = new ROSLIB.Topic({
      ros : ros,
      name : '/laser',
      messageType : 'std_msgs/Empty'
    });
    toggle_msg = new ROSLIB.Message({});
  }  
  function toggleLaser(){
    toggle.publish(toggle_msg)
  }

</script>
</head>

<body onload="init()">
  <h1>Kitty Cam</h1>
  <div id="mjpeg"></div>

  <button onclick="toggleLaser()">Toggle Laser</button>

</body>
</html>
